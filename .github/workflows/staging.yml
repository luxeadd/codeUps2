name: Staging Deploy

on:                     # ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®š
  push:                 # ãƒ—ãƒƒã‚·ãƒ¥æ™‚ã«å®Ÿè¡Œ
    branches: [main]    # ãƒ–ãƒ©ãƒ³ãƒã®æŒ‡å®š
  workflow_dispatch:
      
jobs:
  deploy:
    name: Deploy   # ã‚¸ãƒ§ãƒ–ã®åå‰
    runs-on: ubuntu-latest    # ãƒ©ãƒ³ãƒŠãƒ¼ç’°å¢ƒã®æŒ‡å®š

    steps:
        - name: Get latest codel
          uses: actions/checkout@v4   # ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆhttps://github.com/actions/checkoutï¼‰

        - name: Use Node.js 16
          uses: actions/setup-node@v2
          with:
           node-version: '16'
          
        - name: ğŸ”¨ Build Project
          run: |
            npm install
            npm run build

        - name: Sync files
          uses: SamKirkland/FTP-Deploy-Action@v4.3.5   # FTPã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆhttps://github.com/SamKirkland/FTP-Deploy-Actionï¼‰
          with:
              server: ${{ secrets.STAGING_SERVER }}       # FTPã®ã‚µãƒ¼ãƒãƒ¼ã‚¢ãƒ‰ãƒ¬ã‚¹
              username: ${{ secrets.STAGING_USERNAME }}   # FTPã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åå
              password: ${{ secrets.STAGING_PASSWORD }}   # FTPã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
              local-dir: ./frisodeups/                           # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
              server-dir: /sassy-make.com/public_html/pf05.sassy-make.com/wp-content/themes/frisodeups/      # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å…ˆã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ‘ã‚¹
